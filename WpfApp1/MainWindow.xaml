<Window
    x:Class="WpfApp1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:lvc="clr-namespace:LiveChartsCore.SkiaSharpView.WPF;assembly=LiveChartsCore.SkiaSharpView.WPF"
    Title="Benchmark - Измерение производительности"
    Width="1200"
    Height="800">

    <Window.Resources>
        <Style TargetType="Button">
            <Setter Property="Padding" Value="10,5" />
            <Setter Property="Margin" Value="5" />
        </Style>
        <Style TargetType="ComboBox">
            <Setter Property="Margin" Value="5" />
            <Setter Property="Width" Value="200" />
        </Style>
        <Style TargetType="TextBlock">
            <Setter Property="VerticalAlignment" Value="Center" />
            <Setter Property="Margin" Value="5,0,5,0" />
        </Style>
    </Window.Resources>

    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <!--  Заголовок  -->
        <TextBlock
            Grid.Row="0"
            Margin="0,0,0,20"
            HorizontalAlignment="Center"
            FontSize="16"
            FontWeight="Bold"
            Text="Измерение производительности с помощью Benchmark на разных задачах" />

        <!--  Панель управления  -->
        <GroupBox
            Grid.Row="1"
            Padding="10"
            Header="Параметры тестирования">
            <StackPanel Orientation="Vertical">
                <StackPanel Margin="0,0,0,10" Orientation="Horizontal">
                    <TextBlock Text="Тип задачи:" />
                    <ComboBox x:Name="TaskTypeComboBox" SelectedIndex="0">
                        <ComboBoxItem Content="Count Numbers Above Average" />
                        <ComboBoxItem Content="Find Max/Min Identical Elements" />
                        <ComboBoxItem Content="Find Prime Numbers" />
                        <ComboBoxItem Content="Max/Min Even/Odd Numbers" />
                        <ComboBoxItem Content="Average Positive/Negative Numbers" />
                    </ComboBox>

                    <TextBlock Text="Размер данных:" />
                    <ComboBox
                        x:Name="SizeComboBox"
                        Width="120"
                        SelectedIndex="2">
                        <ComboBoxItem Content="10,000" />
                        <ComboBoxItem Content="100,000" />
                        <ComboBoxItem Content="1,000,000" />
                        <ComboBoxItem Content="5,000,000" />
                    </ComboBox>
                </StackPanel>

                <StackPanel Orientation="Horizontal">
                    <ProgressBar
                        x:Name="ProgressBar"
                        Width="200"
                        Height="10"
                        Margin="5"
                        Maximum="100" />

                    <Button
                        x:Name="RunBenchmarkBtn"
                        Background="#FF008000"
                        Click="RunBenchmarkBtn_Click"
                        Content="Запустить тесты"
                        Foreground="White" />
                    <Button
                        x:Name="SaveToDbBtn"
                        Background="#FF1E90FF"
                        Click="SaveToDbBtn_Click"
                        Content="Сохранить в БД"
                        Foreground="White" />
                    <Button
                        x:Name="ClearResultsBtn"
                        Background="#FFDC143C"
                        Click="ClearResultsBtn_Click"
                        Content="Очистить результаты"
                        Foreground="White" />
                </StackPanel>
            </StackPanel>
        </GroupBox>

        <!--  Графики  -->
        <TabControl Grid.Row="2" Margin="0,10,0,0">
            <TabItem Header="Время выполнения">
                <lvc:CartesianChart x:Name="TimeChart" LegendPosition="Right" />
            </TabItem>
            <TabItem Header="Использование памяти">
                <lvc:CartesianChart x:Name="MemoryChart" LegendPosition="Right" />
            </TabItem>
            <TabItem Header="Ускорение">
                <lvc:CartesianChart x:Name="SpeedupChart" LegendPosition="Right" />
            </TabItem>
        </TabControl>

        <!--  Таблица результатов  -->
        <GroupBox
            Grid.Row="3"
            Margin="0,10,0,0"
            Header="Детальные результаты">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>

                <TextBlock
                    x:Name="StatusText"
                    Grid.Row="0"
                    Margin="5"
                    FontStyle="Italic"
                    Text="Готов к тестированию..." />

                <DataGrid
                    x:Name="ResultsDataGrid"
                    Grid.Row="1"
                    Margin="5"
                    AutoGenerateColumns="False"
                    IsReadOnly="True">
                    <DataGrid.Columns>
                        <DataGridTextColumn
                            Width="2*"
                            Binding="{Binding MethodName}"
                            Header="Метод" />
                        <DataGridTextColumn
                            Width="*"
                            Binding="{Binding ExecutionTime}"
                            Header="Время (ms)" />
                        <DataGridTextColumn
                            Width="*"
                            Binding="{Binding MemoryUsed}"
                            Header="Память (MB)" />
                        <DataGridTextColumn
                            Width="*"
                            Binding="{Binding Result}"
                            Header="Результат" />
                        <DataGridTextColumn
                            Width="*"
                            Binding="{Binding Speedup}"
                            Header="Ускорение" />
                    </DataGrid.Columns>
                </DataGrid>
            </Grid>
        </GroupBox>
    </Grid>
</Window>